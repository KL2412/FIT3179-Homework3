{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Olympic Success: Medals Won per Million People",
    "subtitle": "Highlighting countries with the highest medals per capita in the 2024 Olympics",
    "fontSize": 16,
    "anchor": "middle"
  },
  "width": 1600,
  "height": 800,
  "data": {
    "url": "Dataset/data.csv"
  },
  "transform": [
    {
      "lookup": "id",
      "from": {
        "data": {
          "url": "https://vega.github.io/vega-datasets/data/world-110m.json",
          "format": {
            "type": "topojson",
            "feature": "countries"
          }
        },
        "key": "id"
      },
      "as": "geo"
    },
    {
      "calculate": "(datum.Total / datum.total_population) * 1000000",
      "as": "medals_per_capita"
    }
  ],
  "projection": {
    "type": "mercator"
  },
  "mark": "geoshape",
  "encoding": {
    "shape": {
      "field": "geo",
      "type": "geojson"
    },
    "color": {
      "field": "medals_per_capita",
      "type": "quantitative",
      "scale": {
        "scheme": "reds",
        "domain": [0, 4]
      },
      "legend": {
        "title": "Medals per Million People"
      }
    },
    "tooltip": [
      {"field": "country_long", "type": "nominal", "title": "Country"},
      {"field": "Gold Medal", "type": "quantitative", "title": "Gold Medals"},
      {"field": "Silver Medal", "type": "quantitative", "title": "Silver Medals"},
      {"field": "Bronze Medal", "type": "quantitative", "title": "Bronze Medals"},
      {"field": "Total", "type": "quantitative", "title": "Total Medals"},
      {"field": "total_population", "type": "quantitative", "title": "Population"},
      {
        "field": "medals_per_capita",
        "type": "quantitative",
        "title": "Medals per Million People"
      }
    ]
  }
}
